{"version":3,"names":[],"mappings":"","sources":["assets/js/app.js"],"sourcesContent":["const elTodoInput  = document.querySelector('.todo_input');\nconst elTodoBox    = document.querySelector('.todo_box');\nconst elTodoTabs   = document.querySelector('.todo_tabs');\nconst elTodoList   = document.querySelector('.todo_list');\nconst elPendingCnt = document.querySelector('.pending_cnt');\nconst elBtnAdd     = document.querySelector('.btn_add');\nconst elBtnClear   = document.querySelector('.btn_clear');\n\nconst strHistory = localStorage.getItem('todo') ;\n\nlet arrTodo = strHistory ? JSON.parse(strHistory) : [];\n\nfunction render() {\n  let strList       = '';\n  let intPendingCnt = 0;\n\n  arrTodo.forEach(function(todo, idx) {\n    strList +=  `<li class=\"${(todo.isDone) ? 'complete' : ''}\" >` +\n                  `<div><input class=\"todo_checkbox\" type=\"checkbox\" data-num=\"${idx}\"><span class=\"material-icons todo_check\">check</span></div>` +\n                  `<div><span class=\"todo_item\">${todo.item}</span></div>` +\n                  `<div><span class=\"material-icons btn_delete\" data-num=\"${idx}\">clear</span></div>` +\n                `</li>`;\n\n    if (todo.isDone === false) {\n      intPendingCnt += 1;\n    }\n  });\n  \n  elTodoList.innerHTML     = strList;\n  elPendingCnt.textContent = intPendingCnt;\n  \n  elTodoBox.style.display = 'block';\n  \n  localStorage.setItem('todo', JSON.stringify(arrTodo));\n}\n\nfunction addTodo() {\n  let objInput = {\n    item: elTodoInput.value.trim(),\n    isDone: false,\n  };\n\n  arrTodo.push(objInput);\n  render();\n  elTodoInput.value = '';\n}\n\nfunction refreshTab() {\n  let tabIdx = 0;\n  \n  for (let i = 0; i < elTodoTabs.children.length; i++) {\n    if (elTodoTabs.children[i].children[0].getAttribute('class') === 'active') {\n      tabIdx = i;\n    }\n  }\n\n  elTodoTabs.children[tabIdx].children[0].click();\n}\n\nif (arrTodo.length > 0) {\n  render();\n}\n\nelTodoInput.addEventListener('keydown', function(e) {\n  if (e.keyCode !== 13) {\n    return;\n  }\n\n  if (e.target.value.trim() === '') {\n    alert('待辦事項不可為空值！');\n    return;\n  }\n\n  addTodo();\n  refreshTab();\n});\n\nelBtnAdd.addEventListener('click', function(e) {\n  if (elTodoInput.value.trim() === '') {\n    alert('待辦事項不可為空值！');\n    return;\n  }\n\n  addTodo();\n  refreshTab();\n});\n\nelTodoTabs.addEventListener('click', function(e) {\n  e.preventDefault();\n\n  const targetIdx = e.target.getAttribute('data-tab');\n\n  for (let i = 0; i < elTodoTabs.children.length; i++) {\n    elTodoTabs.children[i].children[0].removeAttribute('class');\n  }\n  \n  elTodoTabs.children[targetIdx].children[0].setAttribute('class', 'active');\n\n  for (let i = 0; i < elTodoList.children.length; i++) {\n    elTodoList.children[i].removeAttribute('style');\n\n    switch(targetIdx) {\n      case '1':\n        if (elTodoList.children[i].getAttribute('class') === 'complete') {\n          elTodoList.children[i].style.display = 'none';\n        }\n      break;\n\n      case '2':\n        if (elTodoList.children[i].getAttribute('class') !== 'complete') {\n          elTodoList.children[i].style.display = 'none';\n        }\n      break;\n    }\n  }\n});\n\nelTodoList.addEventListener('click', function(e) {\n  const targetClass = e.target.getAttribute('class');\n  const targetIdx   = e.target.getAttribute('data-num') ;\n\n  if (!targetClass || !targetClass.match(/btn_delete|todo_checkbox/)) {\n    return;\n  }\n\n  if (targetClass == 'todo_checkbox') {\n    elTodoList.children[targetIdx].setAttribute('class', 'complete');\n    arrTodo[targetIdx].isDone = true;\n  }\n  else {\n    arrTodo.splice(targetIdx, 1);\n  }\n\n  render();\n  refreshTab();\n});\n\nelBtnClear.addEventListener('click', function(e) {\n  e.preventDefault();\n\n  arrTodo = arrTodo.filter(todo => todo.isDone === false);\n\n  render();\n  refreshTab();\n});"],"file":"app.js"}